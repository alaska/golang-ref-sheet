%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Golang Reference Sheet
% Version 0.1 (01/09/2016)
%
% Author:
% Andy Walker (https://github.com/alaska)
% License:
% The MIT License (see included LICENSE file)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Basic document setup
\documentclass{article}
\usepackage[portrait, margin=0.25in]{geometry}
\setlength{\parindent}{0pt}
% Local imports (and anything they include) first
\usepackage{import}
% To allow us to use solarized colors elsewhere in the document
\subimport{theme/}{solarized}

% Package imports
\usepackage[outputdir=\directlua{tex.sprint(os.getenv('BUILD_DIR'))}]{minted}
\usepackage[framemethod=tikz]{mdframed}
\usepackage{pdfrender}

% Frame/box definitions
\pagecolor{sbase01}
\newmdenv[backgroundcolor=sbase3,linewidth=0pt, roundcorner=3pt, linecolor=sbase02, skipabove=0pt, skipbelow=3pt,innerleftmargin=3pt, innerrightmargin=0pt, innertopmargin=3pt, innerbottommargin=3pt, frametitleaboveskip=3pt, frametitlebelowskip=3pt, frametitlerule=true, frametitlerulewidth=0.5pt, frametitlebackgroundcolor=sblue, subtitlebackgroundcolor=sblue, frametitlefont=\tiny\tt, subtitlefont=\tiny\tt, subtitleaboveline=true, subtitlebelowline=true, subtitleabovelinewidth=0.5pt, subtitlebelowlinewidth=0.5pt]{codebox}

% Code formatting alias/options
\usemintedstyle{solarizedlight}
\newminted{go}{autogobble}

\newcommand*{\CheapShadow}[1]{%
  \begingroup
    \leavevmode
    \rlap{\kern.3pt\raise-.3pt\hbox{%
      \pdfrender{
        TextRenderingMode=FillStroke,
        LineWidth=.2pt,
        StrokeColor=black,
		FillColor=black,
      }#1%
    }}%
    \rlap{%
      \pdfrender{
        TextRenderingMode=Stroke,
        LineWidth=.2pt,
      }#1%
    }%
    \hbox{#1}%
  \endgroup
}

\begin{document}
\begin{minipage}{\textwidth}
    \fontfamily{pag}%
    \fontseries{b}%
    \textcolor{sblue}{\CheapShadow{\Large{Go Quick Reference}\tiny{version $\alpha$}}}\hfill
    \includegraphics[width=0.5cm]{./figures/gopher.eps}
\end{minipage}
\tt\tiny%
\begin{minipage}[t]{.25\textwidth}
    \begin{codebox}[frametitle={Intro}]
        \begin{gocode}
            package main
            import (
            "fmt"
            )
            func main() {
                a := 1 + 2
                b := false
                "foo goto bar"
                5-3
                "5-3"
                5*3
            }
        \end{gocode}
    \end{codebox}
    \begin{codebox}[frametitle={More}]
        %\inputminted[firstline=2,lastline=10]{go}{./go/quickref_src.go}
        \begin{gocode}
            func foo(bar int, baz int) int {
                return bar + baz
            }
        \end{gocode}
    \end{codebox}
    \begin{codebox}[frametitle={More2}]
        \begin{gocode}
            func foo(bar int, baz int) int {
                return bar + baz
            }
        \end{gocode}
    \end{codebox}
    \begin{codebox}
        \begin{gocode}
            package anothermain
            import (
            "fmt"
            )
            func main() {
                fmt.Println("Gopher, save me")
            }
        \end{gocode}
    \end{codebox}
\end{minipage}%
\begin{minipage}[t]{.25\textwidth}
    \mdfsetup{leftmargin=3pt}%
    \begin{codebox}
        \begin{gocode}
            package anothermain
            import (
            "fmt"
            )
            func main() {
                fmt.Println("Gopher, save me")
            }
        \end{gocode}
    \end{codebox}
\end{minipage}%
\begin{minipage}[t]{.25\textwidth}
    \mdfsetup{leftmargin=3pt}%
    \begin{codebox}
        \begin{gocode}
            package anothermain
            import (
            "fmt"
            )
            func main() {
                fmt.Println("Gopher, save me")
            }
        \end{gocode}
    \end{codebox}
\end{minipage}%
\begin{minipage}[t]{.25\textwidth}
    \mdfsetup{leftmargin=3pt}%
    \begin{codebox}
        \begin{gocode}
            package anothermain
            import (
            "fmt"
            )
            func main() {
                fmt.Println("Gopher, save me")
            }
        \end{gocode}
    \end{codebox}
\end{minipage}%
\end{document}
