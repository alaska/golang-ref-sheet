%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Golang Reference Sheet
% Version 0.1 (01/09/2016)
%
% Author:
% Andy Walker (https://github.com/alaska)
% License:
% The MIT License (see included LICENSE file)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Basic document setup
\documentclass[10pt]{article}
\usepackage[portrait, margin=0.25in]{geometry}
\setlength{\parindent}{0pt}
% Local imports (and anything they include) first
\usepackage{import}
% To allow us to use solarized colors elsewhere in the document
\subimport{theme/}{solarized}

% Package imports
\usepackage[outputdir=\directlua{tex.sprint(os.getenv('BUILD_DIR'))}]{minted}
\usepackage{tcolorbox}
\usepackage{pdfrender}

% Frame/box definitions
%\pagecolor{sbase01}
%TODO: Look at sidebyside, overlay, tcbline, segmentation style
\newtcolorbox{codebox}[1][]{fontupper=\tiny\tt, coltext=black, colback=sbase3, fonttitle=\tiny\tt, coltitle=white, colbacktitle=sblue, arc=3pt, boxrule=0pt, titlerule=0.5pt, box align=top, before skip=3pt, after skip=0pt, left skip=0pt, right skip=3pt, top=3pt, toptitle=3pt, bottomtitle=3pt, boxsep=0pt, left=3pt, top=3pt, halign=left, title=#1}

% Code formatting alias/options
\usemintedstyle{solarizedlight}
\newminted{go}{autogobble}

\newcommand*{\CheapShadow}[1]{%
  \begingroup
    \leavevmode
    \rlap{\kern.3pt\raise-.3pt\hbox{%
      \pdfrender{
        TextRenderingMode=FillStroke,
        LineWidth=.2pt,
        StrokeColor=black,
		FillColor=black,
      }#1%
    }}%
    \rlap{%
      \pdfrender{
        TextRenderingMode=Stroke,
        LineWidth=.2pt,
      }#1%
    }%
    \hbox{#1}%
  \endgroup
}

\begin{document}
\begin{minipage}{\textwidth}
    \fontfamily{pag}%
    \fontseries{b}%
    \textcolor{sblue}{\CheapShadow{\Large{Go Quick Reference}\tiny{version $\alpha$}}}\hfill
    \includegraphics[width=0.5cm]{./figures/gopher.eps}
\end{minipage}
\tt\tiny%
\begin{minipage}[t]{.25\textwidth}
	\begin{codebox}[Program Structure]
		\begin{gocode}
            package main

            import (
                "pkg"
                "pkg2"
            )
            //Can also import per-line
            import "fmt"

            func main() {
                // Code
            }
		\end{gocode}
        \tcbsubtitle{stuff}
        blah
	\end{codebox}
    \begin{codebox}[Intro]
        \begin{gocode}
            package main
            import (
            "fmt"
            )
            func main() {
                a := 1 + 2
                b := false
                "foo goto bar"
                5-3
                "5-3"
                5*3
            }
        \end{gocode}
    \end{codebox}
    \begin{codebox}[More]
        %\inputminted[firstline=2,lastline=10]{go}{./go/quickref_src.go}
        \begin{gocode}
            func foo(bar int, baz int) int {
                return bar + baz
            }
        \end{gocode}
    \end{codebox}
    \begin{codebox}[more2]
        \begin{gocode}
            func foo(bar int, baz int) int {
                return bar + baz
            }
        \end{gocode}
    \end{codebox}
    \begin{codebox}
        \begin{gocode}
            package anothermain
            import (
            "fmt"
            )
            func main() {
                fmt.Println("Gopher, save me")
            }
        \end{gocode}
    \end{codebox}
\end{minipage}%
\begin{minipage}[t]{.25\textwidth}
    \begin{codebox}
        \begin{gocode}
            package anothermain
            import (
            "fmt"
            )
            func main() {
                fmt.Println("Gopher, save me")
            }
        \end{gocode}
    \end{codebox}
\end{minipage}%
\begin{minipage}[t]{.25\textwidth}
    \begin{codebox}
        \begin{gocode}
            package anothermain
            import (
            "fmt"
            )
            func main() {
                fmt.Println("Gopher, save me")
            }
        \end{gocode}
    \end{codebox}
\end{minipage}%
\begin{minipage}[t]{.25\textwidth}
    \tcbset{right skip=0pt}%
    \begin{codebox}
        \begin{gocode}
            package anothermain
            import (
            "fmt"
            )
            func main() {
                fmt.Println("Gopher, save me")
            }
        \end{gocode}
    \end{codebox}
\end{minipage}%
\end{document}
